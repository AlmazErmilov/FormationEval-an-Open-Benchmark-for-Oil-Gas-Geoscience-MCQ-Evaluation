\documentclass[11pt]{article}

\usepackage[margin=1in]{geometry}
\usepackage{booktabs}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{longtable}
\usepackage{url}

\title{FormationEval: an open benchmark for oil and gas geoscience MCQ evaluation}
\author{
Almaz Ermilov\\
UiT The Arctic University of Norway\\
\texttt{almaz.ermilov@gmail.com}
}
\date{}

\begin{document}
\maketitle

\begin{abstract}
This paper presents FormationEval, an open multiple-choice question benchmark for evaluating language models on petroleum geoscience and subsurface disciplines. The dataset contains 505 questions across seven domains including petrophysics, petroleum geology and reservoir engineering, derived from three authoritative sources using a concept-based approach that avoids verbatim copying of copyrighted text. Each question includes provenance metadata and a contamination risk label to support reproducible evaluation. The evaluation covers 72 models from major providers including OpenAI, Anthropic, Google, Meta and open-weight alternatives. The top performers achieve over 97\% accuracy, with Gemini 3 Pro Preview reaching 99.8\%. Among open-weight models, GLM-4.7 leads at 98.6\%. Petrophysics emerges as the most challenging domain across all models, while smaller models show wider performance variance. Residual length bias in the dataset (correct answers tend to be longer) is documented along with bias mitigation strategies applied during construction. The benchmark, evaluation code and results are publicly available.
\end{abstract}

\section{Introduction}

Large language models are increasingly applied to domain-specific tasks in science and engineering, yet their capabilities in specialized fields remain difficult to assess. General benchmarks like MMLU \cite{mmlu} cover broad knowledge but lack depth in technical disciplines. For petroleum geoscience and subsurface engineering---fields requiring understanding of well logging physics, reservoir characterization and geological interpretation---no widely adopted public benchmark exists.

This work addresses the gap with FormationEval, a 505-question multiple-choice benchmark covering seven domains: petrophysics, petroleum geology, geophysics, reservoir engineering, sedimentology, drilling engineering and production engineering. Questions are derived from authoritative textbooks and open courseware using a concept-based methodology that tests understanding rather than phrase recognition, while respecting copyright constraints.

The contributions are: (1) a methodology for generating MCQs from technical sources without verbatim copying; (2) a curated dataset with provenance metadata and contamination risk labels; and (3) an evaluation of 72 language models across multiple providers, revealing performance patterns by domain and difficulty level.

% Source pointers: README.md, data/benchmark/README.md

% Notes for figures and tables (draft):
% F1: MCQ creation pipeline diagram (OCR -> chunking -> generation -> QA -> dataset).
% F2: Evaluation pipeline diagram (config -> inference -> cache -> analysis -> reports).
% F3: Results summary chart (top-10 accuracy bar or/and top10 worst accuracy or/and accuracy vs price scatter).
% T1: Dataset summary (table below).
% T2: Domain and difficulty distribution table.
% T3: Bias mitigation before and after table.
%
% ============================================================================
% DATA SOURCES FOR CHARTS AND GRAPHS
% ============================================================================
%
% Primary data files (for extracting chart data):
%   eval/results/leaderboard.md      - 72 model results: accuracy, prices, difficulty, domain, bias
%   eval/results/analysis.md         - Hardest questions, position/length bias per model
%   eval/results/questions.csv       - Per-question breakdown with model responses
%   data/benchmark/formationeval_v0.1.json - Full dataset (505 questions)
%
% Code files (for understanding metrics and metadata):
%   eval/reports.py                  - MODEL_METADATA dict with pricing and open-weight status
%   eval/metrics.py                  - Accuracy calculation and Wilson CI functions
%   eval/extraction.py               - Answer extraction patterns
%
% Chart ideas from data:
%   - Top-20 accuracy bar chart (from leaderboard.md overall rankings)
%   - Accuracy vs price scatter plot (accuracy + Price columns)
%   - Domain accuracy heatmap (from By domain table in leaderboard.md)
%   - Difficulty breakdown grouped bar (Easy/Medium/Hard columns)
%   - Hardest questions table (from analysis.md top 10)
%   - Open vs closed model comparison (Open column)
%
% ============================================================================

\section{Related work}

General-purpose benchmarks like MMLU \cite{mmlu} and ARC \cite{arc} evaluate broad knowledge and reasoning capabilities but provide limited coverage of specialized domains. MMLU includes professional exam questions across 57 subjects but only a few relate to earth sciences or engineering. Domain-specific benchmarks exist for medicine, law and computer science, but petroleum geoscience lacks an equivalent evaluation resource.

MCQ generation from text has been explored using both rule-based and neural approaches. The concept-based methodology presented here differs by emphasizing original question formulation rather than transformation of source sentences, prioritizing both copyright compliance and assessment of understanding over recognition.

% Suggested citations: MMLU \cite{mmlu}, ARC \cite{arc}

\section{Benchmark design and construction}

\subsection{Task definition and scope}

FormationEval uses a four-choice multiple-choice question format with exactly one correct answer per question. This format is compatible with standard evaluation frameworks and enables straightforward accuracy computation.

Questions cover seven domains: Petrophysics (well logging, formation evaluation), Petroleum Geology (source rocks, migration, trapping), Sedimentology (depositional environments, diagenesis), Geophysics (seismic interpretation, rock physics), Reservoir Engineering (fluid flow, recovery mechanisms), Drilling Engineering (wellbore stability, operations) and Production Engineering (completions, artificial lift). Questions may belong to multiple domains when the topic spans disciplines.

Each question is assigned a difficulty level (easy, medium or hard) based on cognitive demand: easy questions test definitions and direct recall, medium questions require applying concepts to scenarios, and hard questions involve integrating multiple concepts or analyzing edge cases.

% Source pointers: README.md, data/benchmark/README.md

\subsection{Source selection and licensing policy}

The benchmark draws from three sources: Ellis \& Singer's \textit{Well Logging for Earth Scientists} \cite{ellis_singer_2007} (219 questions), Bj{\o}rlykke's \textit{Petroleum Geoscience} \cite{bjorlykke_2010} (262 questions) and TU Delft OpenCourseWare \cite{tudelft_ocw_2008} (24 questions).

The benchmark uses a concept-based derivation approach: questions are written from scratch based on concepts extracted from source material, without copying sentences or closely paraphrasing distinctive problem structures. This respects the legal distinction between ideas (not copyrightable) and expression (protected). Standard technical terms (porosity, Archie equation, neutron-density crossplot) may appear as-is since terminology is not copyrightable.

All generated items are tagged with \texttt{derivation\_mode: concept\_based} and include source provenance fields that enable verification without reproducing protected text.

% Source pointers: data/sources/open/README.md, README.md

\subsection{Schema and metadata}

Each question includes required fields: unique identifier, question text, four choices, answer index (0--3), answer key (A--D), difficulty level, domains, topics and a rationale explaining the correct answer. The rationale serves dual purposes: it aids human verification during development and provides educational value to benchmark users.

Each item also includes a \texttt{contamination\_risk} label indicating likelihood that similar questions exist in LLM training data: \textit{low} for novel questions specific to the source, \textit{medium} for common concepts where similar questions may exist and \textit{high} for standard introductory topics almost certainly present in training data. This enables analysis of model performance stratified by contamination likelihood.

Provenance metadata includes source identifier, title, chapter reference, license and retrieval date. See Appendix A for the complete schema reference.

% Source pointers: README.md, data/benchmark/README.md

\subsection{Generation pipeline}

The generation pipeline consists of four stages:

\begin{enumerate}
\item \textbf{Text extraction}: Source PDFs are converted to Markdown using OCR, preserving structure and mathematical notation.
\item \textbf{Chunking}: Documents are split by chapter or section, with each chunk sized for model context (typically one chapter, approximately 10,000--15,000 tokens).
\item \textbf{Candidate generation}: GPT-5.2 with high reasoning effort receives the chapter text along with a detailed system prompt specifying schema requirements, concept-based derivation rules, difficulty targets and output format. The model generates 5--12 questions per chapter.
\item \textbf{Verification}: Generated questions undergo consistency validation (schema compliance, no duplicate choices, answer index in range) and evidence-based verification (confirming support in source text, flagging ambiguous items).
\end{enumerate}

The system prompt emphasizes that questions must be standalone---answerable from domain knowledge without access to the source chapter. Phrases like ``according to the chapter'' or ``the text describes'' are explicitly prohibited. A summary of the generation prompt is provided in Appendix B; the full 475-line system prompt is available in the repository at \texttt{src/prompts/mcq\_generator\_system\_prompt.txt}.

% Source pointers: src/README.md
%
% ============================================================================
% FIGURE PLACEHOLDER: MCQ Generation Pipeline
% ============================================================================
% Create diagram showing the 4-stage pipeline:
%   Source PDF → OCR (Mistral) → Chapter Split → LLM Generation → Verification → Dataset
%
% Suggested format: Draw.io or Mermaid, export to PDF
% Include: Text extraction, Chunking (1-3 pages), Candidate generation (GPT-4+),
%          Verification (schema + evidence check)
%
% To add the figure, uncomment and update:
% \begin{figure}[h]
%   \centering
%   \includegraphics[width=\textwidth]{figures/mcq_pipeline.pdf}
%   \caption{MCQ generation pipeline: source PDFs are converted to Markdown via OCR,
%            split into chapter chunks, processed by an LLM to generate candidate questions,
%            and verified for schema compliance and source evidence.}
%   \label{fig:mcq_pipeline}
% \end{figure}
% ============================================================================

\subsection{Quality assurance and audit}

Human spot-checking is essential despite high LLM instruction-following reliability. For each source chapter, 5--10 questions were manually verified against the source material to confirm: (1) the marked answer is correct and unambiguous; (2) distractors are plausible but clearly wrong; (3) no copied phrases appear in questions or answers; (4) the rationale supports the marked answer.

The full dataset (505 questions across 45+ chapters) was reviewed in batches grouped by source and chapter. The audit log records batch status and any issues requiring correction. One question required fixing during the final review pass.

The required rationale field accelerated verification: when a rationale contradicts the answer it claims to support, the error is immediately visible without re-reading source material.

% Source pointers: docs/lessons_learned.md, docs/notes_and_audit_on_505_MCQs.md

\subsection{Bias analysis and mitigation}

Initial analysis revealed two exploitable patterns:

\textbf{Length bias}: Correct answers were longest in 64.6\% of questions (expected: 25\%), with correct answers averaging 86.6 characters versus 69.8 for distractors.

\textbf{Qualifier word bias}: Absolute words like ``always'' appeared only in distractors (49 instances, 0\% correct rate), while hedged words like ``may'' appeared only in correct answers (13 instances, 100\% correct rate).

A model using only surface heuristics could achieve approximately 70\% accuracy without domain knowledge.

\textbf{Mitigation applied}: 136 distractors were expanded with technical context to reduce length imbalance (from 64.6\% to 51.5\% longest-is-correct). All ``always'' instances were replaced with varied synonyms (invariably, necessarily, inherently) to break the single-word exploit. The word ``may'' was added to 13 distractors with ``no-effect'' claims to balance hedging language.

\textbf{Residual issues}: Length bias remains above the 25\% baseline. The absolute-word synonyms all have 0\% correct rate, making a combined ``any-absolute-word=wrong'' heuristic still partially exploitable. These limitations are documented for transparency. See Appendix C for detailed before/after metrics.

% Source pointers: docs/bias_fix_tracking.md, data/benchmark/README.md

\subsection{Human-readable export}

To facilitate human review, the dataset is exported to PDF with a cover page, question cards showing all metadata and bookmarks for navigation. This format is more accessible than raw JSON for domain experts performing quality checks and enables browsing questions by domain or topic without programming tools.

% Source pointers: src/README.md, docs/lessons_learned.md

\section{Dataset summary}

Version 0.1 of FormationEval contains 505 questions in English covering 811 unique topics. Table~\ref{tab:summary} summarizes key metrics and Table~\ref{tab:distribution} shows the distribution by domain and difficulty. Table~\ref{tab:sources} provides the breakdown by source.

Petrophysics represents the largest domain (54\% of questions) reflecting the depth of coverage in the well logging textbook. The difficulty distribution targets 30\% easy, 50\% medium and 20\% hard; the actual distribution (26\%/54\%/20\%) is close to these targets. Answer positions are balanced: A=27\%, B=26\%, C=25\%, D=22\%.

% Source pointers: data/benchmark/README.md

\begin{table}[h]
  \centering
  \caption{Dataset summary (v0.1).}
  \label{tab:summary}
  \begin{tabular}{ll}
    \toprule
    Metric & Value \\
    \midrule
    Questions & 505 \\
    Sources & 3 \\
    Domains & 7 \\
    Unique topics & 811 \\
    Language & English \\
    \bottomrule
  \end{tabular}
\end{table}

\begin{table}[h]
  \centering
  \caption{Domain and difficulty distribution. Domain counts are non-exclusive: questions may belong to multiple domains.}
  \label{tab:distribution}
  \begin{tabular}{lrr}
    \toprule
    Category & Count & Share \\
    \midrule
    \multicolumn{3}{l}{\textit{By domain}} \\
    Petrophysics & 272 & 54\% \\
    Petroleum Geology & 151 & 30\% \\
    Sedimentology & 98 & 19\% \\
    Geophysics & 80 & 16\% \\
    Reservoir Engineering & 43 & 9\% \\
    Drilling Engineering & 24 & 5\% \\
    Production Engineering & 14 & 3\% \\
    \midrule
    \multicolumn{3}{l}{\textit{By difficulty}} \\
    Easy & 132 & 26\% \\
    Medium & 274 & 54\% \\
    Hard & 99 & 20\% \\
    \bottomrule
  \end{tabular}
\end{table}

\begin{table}[h]
  \centering
  \caption{Source breakdown.}
  \label{tab:sources}
  \begin{tabular}{lr}
    \toprule
    Source & Questions \\
    \midrule
    Ellis \& Singer -- Well Logging for Earth Scientists (2007) & 219 \\
    Bj{\o}rlykke -- Petroleum Geoscience (2010) & 262 \\
    TU Delft OCW -- Petroleum Geology (2008) & 24 \\
    \bottomrule
  \end{tabular}
\end{table}

\section{Evaluation setup}

\subsection{Models and providers}

The evaluation covers 72 language models across two providers: Azure OpenAI \cite{azure_openai} and OpenRouter \cite{openrouter}. This includes models from OpenAI \cite{gpt4,gpt4o,gpt41,gpt5,o3_o4mini} (GPT-4o, GPT-4.1, GPT-5 series, o3-mini, o4-mini), Anthropic \cite{claude3,claude35,claude37,claude_opus45} (Claude 3.5 Haiku, Claude 3.7 Sonnet, Claude Opus 4.5), Google \cite{gemini,gemini2,gemini25,gemini3,gemma3} (Gemini 2.0, 2.5, 3 series, Gemma 3), Meta \cite{llama3,llama31,llama32,llama4} (Llama 3.1, 3.2, 4), DeepSeek \cite{deepseek_v3,deepseek_v3_2,deepseek_r1} (R1, V3.2), Mistral \cite{mistral} (Small, Medium, Nemo, Ministral), Alibaba \cite{qwen3} (Qwen3 series), Zhipu \cite{glm4,glm47} (GLM-4, GLM-4.7), xAI \cite{grok3,grok} (Grok 3, 4), Moonshot \cite{kimi_k2} (Kimi K2), MiniMax \cite{minimax_m2} (M2), Microsoft \cite{phi4} (Phi-4) and Nvidia \cite{nemotron} (Nemotron).

Models range from compact 3B parameter variants to frontier reasoning models. Open-weight models (32 of 72) include GLM-4.7, DeepSeek-R1, Llama-4-Scout, Qwen3 variants, Mistral models and Gemma 3. Pricing spans from \$0.02/M tokens (Llama-3.2-3b) to \$25/M tokens (Claude Opus 4.5 output).

% Source pointers: eval/README.md, eval/results/leaderboard.md, eval/reports.py

\subsection{Prompting and answer extraction}

The evaluation uses a zero-shot prompt format to assess model knowledge without providing examples:

\textbf{System prompt:} ``You are taking a multiple-choice exam on Oil \& Gas geoscience. For each question, select the single best answer from the options provided. State your final answer as a single letter: A, B, C, or D.''

\textbf{User prompt:} The question text followed by four labeled choices (A--D) and ``Answer:'' as the final line.

Answer extraction uses flexible regex patterns to handle varied response formats. Preprocessing removes reasoning tags (\texttt{<thinking>}, \texttt{<think>}) from models that expose chain-of-thought traces (o1, o3, DeepSeek-R1). The extraction logic prioritizes explicit patterns (``The answer is B'', ``Answer: C'') over positional heuristics. Failed extractions---where no A/B/C/D letter can be identified---are counted as incorrect answers.

% Source pointers: docs/evaluation_pipeline_concept.md, eval/extraction.py
%
% ============================================================================
% FIGURE PLACEHOLDER: Evaluation Pipeline
% ============================================================================
% Create diagram showing the evaluation flow:
%   Config (models.yaml) → API Inference → Cache → Analysis → Reports (JSON/MD/CSV)
%
% Suggested format: Draw.io or Mermaid, export to PDF
% Include: Model config, Azure/OpenRouter APIs, response caching, scoring,
%          report generation (leaderboard.md, analysis.md, questions.csv)
%
% To add the figure, uncomment and update:
% \begin{figure}[h]
%   \centering
%   \includegraphics[width=\textwidth]{figures/eval_pipeline.pdf}
%   \caption{Evaluation pipeline: models are configured via YAML, questions sent to
%            Azure OpenAI or OpenRouter APIs, responses cached per model/question,
%            and analyzed to generate leaderboard and analysis reports.}
%   \label{fig:eval_pipeline}
% \end{figure}
% ============================================================================

\subsection{Metrics and confidence intervals}

The primary metric is overall accuracy: correct answers divided by total questions (505). For each accuracy value, 95\% Wilson score confidence intervals \cite{wilson_ci} are computed, which provide better coverage than normal approximation intervals when accuracy is near 0 or 1.

Secondary metrics include accuracy by difficulty level (easy, medium, hard) and by domain (seven categories). The analysis also covers bias patterns: position bias (deviation from uniform A/B/C/D selection) and length bias (tendency to select the longest answer choice). The benchmark's residual length bias (correct answer is longest in 51.5\% of questions) provides a reference point for interpreting model length bias.

% Source pointers: eval/README.md, eval/metrics.py

\subsection{Caching and reproducibility}

API responses are cached per model and question in a structured directory (\texttt{cache/\{model\}/\{question\_id\}.json}). This enables resuming interrupted evaluation runs, re-analyzing results without additional API costs and debugging extraction failures.

Evaluation can be re-run in analyze-only mode to regenerate reports from cached responses. Output files include machine-readable JSON, human-readable Markdown tables and CSV exports with per-question breakdowns including raw model responses (truncated to 500 characters).

% Source pointers: eval/README.md

\section{Results}

\subsection{Overall results}

Table~\ref{tab:leaderboard} presents the top 25 models by accuracy. The highest-performing model is Gemini 3 Pro Preview at 99.8\% (504/505 correct), followed by GLM-4.7 at 98.6\% and Gemini 3 Flash Preview at 98.2\%. Among open-weight models, GLM-4.7 leads, followed by DeepSeek-R1 (96.2\%) and DeepSeek-V3.2 (94.9\%).

Accuracy spans a wide range: from 99.8\% (Gemini 3 Pro Preview) to 57.6\% (Llama-3.2-3b-instruct). Models from Google, OpenAI and Zhipu dominate the top positions. Pricing varies considerably, with some cost-effective models like Grok-4.1-fast (\$0.20/M input) achieving 97.6\% accuracy.

% Source pointers: eval/results/leaderboard.md
%
% ============================================================================
% FIGURE PLACEHOLDER: Results Visualization (Optional)
% ============================================================================
% Option A: Top-20 accuracy bar chart (horizontal bars, sorted by accuracy)
% Option B: Accuracy vs price scatter plot (x=price, y=accuracy, color=open-weight)
% Option C: Domain accuracy heatmap (models × domains)
%
% Data source: eval/results/leaderboard.md
%
% To add the figure, uncomment and update:
% \begin{figure}[h]
%   \centering
%   \includegraphics[width=\textwidth]{figures/results_chart.pdf}
%   \caption{Model accuracy on FormationEval benchmark. [Update based on chart type]}
%   \label{fig:results}
% \end{figure}
% ============================================================================

\begin{table}[h]
  \centering
  \caption{Top 25 models by accuracy. See Appendix~\ref{app:full_leaderboard} for the complete 72-model leaderboard.}
  \label{tab:leaderboard}
  \small
  \begin{tabular}{rlllrr}
    \toprule
    Rank & Model & Open & Price (\$/M) & Accuracy & Correct \\
    \midrule
    1 & gemini-3-pro-preview & No & 2.00/12.00 & 99.8\% & 504/505 \\
    2 & glm-4.7 & Yes & 0.40/1.50 & 98.6\% & 498/505 \\
    3 & gemini-3-flash-preview & No & 0.50/3.00 & 98.2\% & 496/505 \\
    4 & gemini-2.5-pro & No & 1.25/10.00 & 97.8\% & 494/505 \\
    5 & grok-4.1-fast & No & 0.20/0.50 & 97.6\% & 493/505 \\
    6 & gpt-5.2-chat-medium & No & 1.75/14.00 & 97.4\% & 492/505 \\
    7 & kimi-k2-thinking & No & 0.40/1.75 & 97.2\% & 491/505 \\
    8 & claude-opus-4.5 & No & 5.00/25.00 & 97.0\% & 490/505 \\
    9 & gpt-5.2-chat-high & No & 1.75/14.00 & 96.8\% & 489/505 \\
    10 & gpt-5.2-chat-low & No & 1.75/14.00 & 96.8\% & 489/505 \\
    11 & gpt-5-mini-medium & No & 0.25/2.00 & 96.4\% & 487/505 \\
    12 & gpt-5.1-chat-medium & No & 1.25/10.00 & 96.4\% & 487/505 \\
    13 & deepseek-r1 & Yes & 0.30/1.20 & 96.2\% & 486/505 \\
    14 & grok-4-fast & No & 0.20/0.50 & 96.0\% & 485/505 \\
    15 & gpt-5-mini-high & No & 0.25/2.00 & 95.6\% & 483/505 \\
    16 & gpt-5-mini-low & No & 0.25/2.00 & 95.2\% & 481/505 \\
    17 & o4-mini-high & No & 1.10/4.40 & 95.2\% & 481/505 \\
    18 & gemini-2.5-flash & No & 0.30/2.50 & 95.0\% & 480/505 \\
    19 & o4-mini-medium & No & 1.10/4.40 & 95.0\% & 480/505 \\
    20 & grok-3-mini & No & 0.30/0.50 & 95.0\% & 480/505 \\
    21 & deepseek-v3.2 & Yes & 0.22/0.32 & 94.9\% & 479/505 \\
    22 & gpt-5.1-chat-low & No & 1.25/10.00 & 94.9\% & 479/505 \\
    23 & o3-mini-low & No & 1.10/4.40 & 94.9\% & 479/505 \\
    24 & o3-mini-medium & No & 1.10/4.40 & 94.9\% & 479/505 \\
    25 & claude-3.7-sonnet & No & 3.00/15.00 & 94.7\% & 478/505 \\
    \bottomrule
  \end{tabular}
\end{table}

\subsection{By difficulty}

Performance decreases with difficulty level, as expected. For top models, easy questions are nearly saturated (100\% for several models), while hard questions remain discriminative. Gemini 3 Pro Preview achieves 100\% on both easy and hard questions, with a single error on a medium question. GLM-4.7 shows 100\% easy, 98.5\% medium and 97.0\% hard.

Smaller models show wider variance by difficulty. Llama-3.2-3b-instruct achieves 62.9\% on easy questions but only 54.7\% on medium, indicating difficulty labels correlate with model performance patterns.

% Source pointers: eval/results/leaderboard.md

\subsection{By domain}

Petrophysics emerges as the most challenging domain across all models, with typical accuracy 3--5 percentage points lower than other domains. This reflects the technical specificity of well logging physics and formation evaluation concepts.

The top model (Gemini 3 Pro Preview) achieves near-perfect scores across all domains: 99.6\% Petrophysics, 100\% for all other domains. Open-weight leader GLM-4.7 shows 98.2\% Petrophysics versus 99--100\% for other domains.

Production Engineering and Drilling Engineering show the highest average accuracy, though this may reflect smaller question counts (14 and 24 questions respectively) rather than domain difficulty.

% Source pointers: eval/results/leaderboard.md, eval/results/analysis.md

\subsection{Hardest questions}

The ten hardest questions (by model failure rate) reveal systematic knowledge gaps. The hardest question---on strike-slip fault stepovers and pull-apart basin formation---was answered incorrectly by 61 of 72 models (85\%). Most models selected option A (left-stepping arrangement) instead of the correct answer D (right-stepping arrangement for dextral motion).

Eight of the ten hardest questions are from the Petrophysics domain, covering specialized topics like neutron-density crossplot interpretation, invasion profiles and tool calibration. One geology question (strike-slip stepovers) and one easy-labeled question (LWD propagation) also appear in the top 10.

Model agreement analysis shows: 21.6\% of questions were answered correctly by all 72 models, 0\% were missed by all models and 78.4\% showed mixed results. This distribution suggests the benchmark effectively discriminates between model capabilities.

% Source pointers: eval/results/analysis.md

\subsection{Open-weight models}

Of the 72 models evaluated, 32 have publicly available weights. Open-weight models span the full performance spectrum, from GLM-4.7 at 98.6\% (rank 2 overall) to Llama-3.2-3b-instruct at 57.6\% (rank 72). Table~\ref{tab:open_weight} summarizes the top 10 open-weight performers.

The leading open-weight models---GLM-4.7 (Zhipu), DeepSeek-R1 and DeepSeek-V3.2 (DeepSeek), and Llama-4-Scout (Meta)---achieve accuracy above 93\%, competitive with proprietary alternatives and often at lower cost. DeepSeek-R1 at \$0.30/M input offers similar accuracy to GPT-5.1 variants at \$1.25/M input. For cost-sensitive deployments, Qwen3-14b achieves 92.9\% at just \$0.05/M input.

Open-weight models show similar domain patterns to proprietary models: Petrophysics is often among the lower-scoring domains, though Drilling Engineering and Production Engineering also appear as weak points for several models.

\begin{table}[h]
  \centering
  \caption{Top 10 open-weight models by accuracy.}
  \label{tab:open_weight}
  \small
  \begin{tabular}{rllrr}
    \toprule
    Rank & Model & Price (\$/M) & Accuracy & Correct \\
    \midrule
    1 & glm-4.7 & 0.40/1.50 & 98.6\% & 498/505 \\
    2 & deepseek-r1 & 0.30/1.20 & 96.2\% & 486/505 \\
    3 & deepseek-v3.2 & 0.22/0.32 & 94.9\% & 479/505 \\
    4 & llama-4-scout & 0.08/0.30 & 93.1\% & 470/505 \\
    5 & mistral-medium-3.1 & 0.40/2.00 & 93.1\% & 470/505 \\
    6 & qwen3-235b-a22b-2507 & 0.07/0.46 & 93.1\% & 470/505 \\
    7 & qwen3-30b-a3b-thinking-2507 & 0.05/0.34 & 93.1\% & 470/505 \\
    8 & qwen3-14b & 0.05/0.22 & 92.9\% & 469/505 \\
    9 & qwen3-32b & 0.08/0.24 & 92.1\% & 465/505 \\
    10 & gpt-oss-120b & 0.04/0.19 & 90.7\% & 458/505 \\
    \bottomrule
  \end{tabular}
\end{table}

\subsection{Bottom performers}

The ten lowest-scoring models are all compact variants (3B--12B parameters) or older architectures. Llama-3.2-3b-instruct achieves 57.6\%, only marginally above random guessing (25\%). The bottom tier includes Gemma-3-4b-it (71.3\%), Llama-3.1-8b-instruct (72.5\%), Gemma-3n-e4b-it (75.2\%) and Nemotron variants (77--80\%).

These models show consistent patterns: accuracy on easy questions (63--87\%) exceeds medium (55--78\%) and hard (59--82\%), but the gap between easy and medium is larger than for top models. Llama-3.2-3b-instruct shows the widest spread: 62.9\% easy versus 54.7\% medium.

Petrophysics accuracy for bottom-tier models falls to 51--74\%, while other domains remain at 62--98\%. This suggests that smaller models particularly struggle with the technical specificity of well logging concepts. The full 72-model leaderboard is provided in Appendix~\ref{app:full_leaderboard}.

% Source pointers: eval/results/leaderboard.md

\section{Discussion}

\subsection{Interpretation of scores}

The benchmark provides relative comparisons between models rather than absolute measures of domain competence. High scores indicate that a model can answer concept-based questions derived from authoritative sources, but do not guarantee expertise in practical applications.

All models exhibit elevated length bias in this analysis---they select the longest answer choice more often than the 25\% baseline. However, this rate (38--47\% across models) is close to or below the benchmark's residual bias (correct answer is longest in 51.5\% of questions), suggesting models are largely tracking content rather than exploiting length as a proxy.

Position bias is generally low across models, with most showing near-uniform A/B/C/D distributions. Two Nvidia Nemotron variants showed elevated position bias (``High'' level), potentially indicating instruction-following limitations.

\subsection{Limitations and threats to validity}

\textbf{Residual length bias}: Despite mitigation efforts, correct answers remain longest in 51.5\% of questions (versus 25\% expected). This may inflate scores for models sensitive to answer length.

\textbf{Contamination risk}: While questions are generated from concepts rather than copied, the underlying topics appear in textbooks that may be in model training data. Contamination risk labels are provided but actual training data overlap cannot be verified.

\textbf{Quality assurance limits}: Human verification covered spot checks rather than exhaustive review. One question was corrected during the final pass; additional errors may remain.

\textbf{Domain coverage}: Petrophysics dominates (54\% of questions) due to source availability, which may not reflect the breadth of petroleum geoscience equally.

\subsection{Provider and pricing variability}

Model pricing fluctuates and may not reflect values at time of reading. OpenRouter and Azure pricing differ for the same models. Some models are available through multiple providers at different costs.

Provider reliability varies: rate limits, latency and availability differ across Azure OpenAI and OpenRouter endpoints. The caching strategy mitigates this for reproducibility but may not reflect real-world API behavior.

% Source pointers: docs/PROGRESS.md, docs/lessons_learned.md

\section{Release and reproducibility}

The benchmark artifacts are organized for reproducibility:

\textbf{Tracked outputs} (version-controlled): Dataset JSON and PDF, leaderboard and analysis reports in Markdown, per-question CSV with raw model responses (truncated to 500 characters).

\textbf{Cached responses} (gitignored): Raw API responses per model/question, enabling re-analysis without API calls.

\textbf{Human-readable formats}: PDF export of the full dataset with question cards, metadata and bookmarks for domain expert review.

Evaluation scripts support an analyze-only mode that regenerates reports from cached responses without making API calls, ensuring reproducibility even when model APIs change or become unavailable.

% Source pointers: README.md, eval/README.md, data/benchmark/README.md

\section{Data and code availability}
The benchmark, evaluation reports and code are available in the project repository \cite{formationeval_repo}.

\begin{itemize}
  \item Repository: \href{https://github.com/AlmazErmilov/FormationEval-an-Open-Benchmark-for-Oil-Gas-Geoscience-MCQ-Evaluation}{\texttt{github.com/AlmazErmilov/FormationEval-an-Open-Benchmark...}}
  \item Dataset JSON \cite{formationeval_dataset}: \href{https://github.com/AlmazErmilov/FormationEval-an-Open-Benchmark-for-Oil-Gas-Geoscience-MCQ-Evaluation/blob/main/data/benchmark/formationeval_v0.1.json}{\texttt{data/benchmark/formationeval\_v0.1.json}}
  \item Dataset PDF: \href{https://github.com/AlmazErmilov/FormationEval-an-Open-Benchmark-for-Oil-Gas-Geoscience-MCQ-Evaluation/blob/main/data/benchmark/formationeval_v0.1.pdf}{\texttt{data/benchmark/formationeval\_v0.1.pdf}}
  \item Leaderboard: \href{https://github.com/AlmazErmilov/FormationEval-an-Open-Benchmark-for-Oil-Gas-Geoscience-MCQ-Evaluation/blob/main/eval/results/leaderboard.md}{\texttt{eval/results/leaderboard.md}}
  \item Analysis: \href{https://github.com/AlmazErmilov/FormationEval-an-Open-Benchmark-for-Oil-Gas-Geoscience-MCQ-Evaluation/blob/main/eval/results/analysis.md}{\texttt{eval/results/analysis.md}}
  \item Per-question results: \href{https://github.com/AlmazErmilov/FormationEval-an-Open-Benchmark-for-Oil-Gas-Geoscience-MCQ-Evaluation/blob/main/eval/results/questions.csv}{\texttt{eval/results/questions.csv}}
  \item Generation scripts: \href{https://github.com/AlmazErmilov/FormationEval-an-Open-Benchmark-for-Oil-Gas-Geoscience-MCQ-Evaluation/tree/main/src}{\texttt{src/}}
  \item Evaluation scripts: \href{https://github.com/AlmazErmilov/FormationEval-an-Open-Benchmark-for-Oil-Gas-Geoscience-MCQ-Evaluation/tree/main/eval}{\texttt{eval/}}
\end{itemize}

\section{Conclusion and future work}

This paper introduced FormationEval, a 505-question multiple-choice benchmark for evaluating language models on petroleum geoscience. The benchmark covers seven domains derived from authoritative sources using a concept-based methodology that respects copyright while testing domain knowledge.

Evaluation of 72 models reveals that frontier models achieve over 97\% accuracy, with Gemini 3 Pro Preview leading at 99.8\%. Open-weight models perform competitively, with GLM-4.7 achieving 98.6\%. Petrophysics emerges as the most challenging domain across all models.

Future work includes expanding to additional languages (Norwegian, Russian), adding questions from more sources to balance domain coverage and developing contamination detection methods. The benchmark is intended as a living resource, with new models added to the leaderboard as they become available.

\appendix

\section{Schema reference}

Each question includes the following fields:

\begin{table}[h]
  \centering
  \small
  \begin{tabular}{ll}
    \toprule
    Field & Description \\
    \midrule
    \texttt{id} & Unique identifier \\
    \texttt{question} & Question text \\
    \texttt{choices} & Array of 4 options (A--D) \\
    \texttt{answer\_index} & Correct answer index (0--3) \\
    \texttt{answer\_key} & Correct answer letter (A--D) \\
    \texttt{rationale} & Explanation of correct answer \\
    \texttt{difficulty} & easy $|$ medium $|$ hard \\
    \texttt{domains} & Array of broad categories \\
    \texttt{topics} & Array of specific subjects \\
    \texttt{sources} & Provenance metadata array \\
    \texttt{derivation\_mode} & Always ``concept\_based'' \\
    \texttt{metadata.calc\_required} & Boolean (calculation needed) \\
    \texttt{metadata.contamination\_risk} & low $|$ medium $|$ high \\
    \bottomrule
  \end{tabular}
\end{table}

Contamination risk indicates likelihood that similar questions exist in LLM training data: \textit{low} for questions unique to this source, \textit{medium} for common concepts and \textit{high} for standard textbook topics.

\section{Prompt templates}

\subsection{Evaluation prompt}

\textbf{System prompt:}
\begin{quote}
\texttt{You are taking a multiple-choice exam on Oil \& Gas geoscience. For each question, select the single best answer from the options provided. State your final answer as a single letter: A, B, C, or D.}
\end{quote}

\textbf{User prompt format:}
\begin{quote}
\texttt{\{question\}}\\[0.5em]
\texttt{A) \{choice\_a\}}\\
\texttt{B) \{choice\_b\}}\\
\texttt{C) \{choice\_c\}}\\
\texttt{D) \{choice\_d\}}\\[0.5em]
\texttt{Answer:}
\end{quote}

\subsection{Generation prompt summary}

The MCQ generation system prompt instructs the model to:

\begin{enumerate}
\item Generate questions that test \textbf{understanding of concepts}, not recognition of phrases
\item Never copy sentences or descriptive phrases from source text
\item Create standalone questions answerable from domain knowledge without access to the source chapter
\item Distribute difficulty: 30\% easy, 50\% medium, 20\% hard
\item Balance answer options in length and structure
\item Distribute correct answers evenly across positions A/B/C/D
\item Avoid exploitable patterns with qualifier words
\item Include provenance metadata and contamination risk assessment
\end{enumerate}

The full system prompt (475 lines) is available in the repository at \texttt{src/prompts/mcq\_generator\_system\_prompt.txt}.

\section{Bias mitigation summary}

\begin{table}[h]
  \centering
  \caption{Length bias before and after mitigation.}
  \begin{tabular}{lrr}
    \toprule
    Metric & Original & After fixes \\
    \midrule
    Correct answer is longest choice & 64.6\% & 51.5\% \\
    Correct answer avg length & 86.6 chars & 86.6 chars \\
    Distractor avg length & 69.8 chars & 74.0 chars \\
    \bottomrule
  \end{tabular}
\end{table}

\begin{table}[h]
  \centering
  \caption{Qualifier word patterns before and after mitigation.}
  \begin{tabular}{lrrrl}
    \toprule
    Word & In correct & In distractor & Correct rate & Status \\
    \midrule
    ``always'' & 0 & 49 & 0\% & Replaced with synonyms \\
    ``invariably'' & 0 & 12 & 0\% & New (from ``always'') \\
    ``necessarily'' & 0 & 12 & 0\% & New (from ``always'') \\
    ``inherently'' & 0 & 11 & 0\% & New (from ``always'') \\
    ``consistently'' & 0 & 8 & 0\% & New (from ``always'') \\
    ``may'' & 13 & 0 & 100\% & Original (pre-fix) \\
    ``may'' & 13 & 13 & 50\% & After fix \\
    \bottomrule
  \end{tabular}
\end{table}

\textbf{Mitigation applied}: (1) All 49 ``always'' instances replaced with varied synonyms to break single-word exploit; (2) Added ``may'' to 13 distractors with ``no-effect'' claims.

\textbf{Residual issues}: Absolute word synonyms still have 0\% correct rate. Combined ``any-absolute-word=wrong'' heuristic remains partially exploitable.

\section{Audit summary}

Human verification covered 5--10 questions per source chapter (spot-check approach). The full dataset (505 questions across 45+ chapters) was reviewed in batches:

\begin{itemize}
\item Schema compliance: All questions validated
\item Answer correctness: Verified against source material
\item Phrase copying: Checked for verbatim lifts
\item Rationale consistency: Confirmed rationales support marked answers
\end{itemize}

One question was corrected during the final review pass. The required rationale field accelerated verification by making logical inconsistencies immediately visible.

\section{Full model leaderboard}
\label{app:full_leaderboard}

Table~\ref{tab:full_leaderboard} presents all 72 evaluated models ranked by accuracy.

\begin{longtable}{rlllrr}
  \caption{Complete leaderboard: all 72 models by accuracy.} \label{tab:full_leaderboard} \\
  \toprule
  Rank & Model & Open & Price (\$/M) & Accuracy & Correct \\
  \midrule
  \endfirsthead
  \multicolumn{6}{c}{\tablename\ \thetable{} -- continued from previous page} \\
  \toprule
  Rank & Model & Open & Price (\$/M) & Accuracy & Correct \\
  \midrule
  \endhead
  \midrule \multicolumn{6}{r}{Continued on next page} \\
  \endfoot
  \bottomrule
  \endlastfoot
  1 & gemini-3-pro-preview & No & 2.00/12.00 & 99.8\% & 504/505 \\
  2 & glm-4.7 & Yes & 0.40/1.50 & 98.6\% & 498/505 \\
  3 & gemini-3-flash-preview & No & 0.50/3.00 & 98.2\% & 496/505 \\
  4 & gemini-2.5-pro & No & 1.25/10.00 & 97.8\% & 494/505 \\
  5 & grok-4.1-fast & No & 0.20/0.50 & 97.6\% & 493/505 \\
  6 & gpt-5.2-chat-medium & No & 1.75/14.00 & 97.4\% & 492/505 \\
  7 & kimi-k2-thinking & No & 0.40/1.75 & 97.2\% & 491/505 \\
  8 & claude-opus-4.5 & No & 5.00/25.00 & 97.0\% & 490/505 \\
  9 & gpt-5.2-chat-high & No & 1.75/14.00 & 96.8\% & 489/505 \\
  10 & gpt-5.2-chat-low & No & 1.75/14.00 & 96.8\% & 489/505 \\
  11 & gpt-5-mini-medium & No & 0.25/2.00 & 96.4\% & 487/505 \\
  12 & gpt-5.1-chat-medium & No & 1.25/10.00 & 96.4\% & 487/505 \\
  13 & deepseek-r1 & Yes & 0.30/1.20 & 96.2\% & 486/505 \\
  14 & grok-4-fast & No & 0.20/0.50 & 96.0\% & 485/505 \\
  15 & gpt-5-mini-high & No & 0.25/2.00 & 95.6\% & 483/505 \\
  16 & gpt-5-mini-low & No & 0.25/2.00 & 95.2\% & 481/505 \\
  17 & o4-mini-high & No & 1.10/4.40 & 95.2\% & 481/505 \\
  18 & gemini-2.5-flash & No & 0.30/2.50 & 95.0\% & 480/505 \\
  19 & o4-mini-medium & No & 1.10/4.40 & 95.0\% & 480/505 \\
  20 & grok-3-mini & No & 0.30/0.50 & 95.0\% & 480/505 \\
  21 & deepseek-v3.2 & Yes & 0.22/0.32 & 94.9\% & 479/505 \\
  22 & gpt-5.1-chat-low & No & 1.25/10.00 & 94.9\% & 479/505 \\
  23 & o3-mini-low & No & 1.10/4.40 & 94.9\% & 479/505 \\
  24 & o3-mini-medium & No & 1.10/4.40 & 94.9\% & 479/505 \\
  25 & claude-3.7-sonnet & No & 3.00/15.00 & 94.7\% & 478/505 \\
  26 & o3-mini-high & No & 1.10/4.40 & 94.7\% & 478/505 \\
  27 & gpt-5-chat & No & 1.25/10.00 & 94.5\% & 477/505 \\
  28 & o4-mini-low & No & 1.10/4.40 & 94.3\% & 476/505 \\
  29 & gpt-5.1-chat-high & No & 1.25/10.00 & 93.9\% & 474/505 \\
  30 & gpt-4.1 & No & 2.00/8.00 & 93.7\% & 473/505 \\
  31 & gemini-2.0-flash-001 & No & 0.10/0.40 & 93.3\% & 471/505 \\
  32 & gpt-5-nano-low & No & 0.05/0.40 & 93.3\% & 471/505 \\
  33 & llama-4-scout & Yes & 0.08/0.30 & 93.1\% & 470/505 \\
  34 & mistral-medium-3.1 & Yes & 0.40/2.00 & 93.1\% & 470/505 \\
  35 & qwen3-235b-a22b-2507 & Yes & 0.07/0.46 & 93.1\% & 470/505 \\
  36 & qwen3-30b-a3b-thinking-2507 & Yes & 0.05/0.34 & 93.1\% & 470/505 \\
  37 & gpt-4o & No & 2.50/10.00 & 92.9\% & 469/505 \\
  38 & gpt-5-nano-high & No & 0.05/0.40 & 92.9\% & 469/505 \\
  39 & gpt-5-nano-medium & No & 0.05/0.40 & 92.9\% & 469/505 \\
  40 & minimax-m2 & No & 0.20/1.00 & 92.9\% & 469/505 \\
  41 & qwen3-14b & Yes & 0.05/0.22 & 92.9\% & 469/505 \\
  42 & qwen3-32b & Yes & 0.08/0.24 & 92.1\% & 465/505 \\
  43 & gpt-4.1-mini & No & 0.40/1.60 & 91.7\% & 463/505 \\
  44 & claude-haiku-4.5 & No & 1.00/5.00 & 91.5\% & 462/505 \\
  45 & gemini-2.5-flash-lite & No & 0.10/0.40 & 91.3\% & 461/505 \\
  46 & gpt-oss-120b & Yes & 0.04/0.19 & 90.7\% & 458/505 \\
  47 & qwen3-vl-8b-thinking & Yes & 0.18/2.10 & 90.3\% & 456/505 \\
  48 & mistral-small-3.2-24b-instruct & Yes & 0.06/0.18 & 89.3\% & 451/505 \\
  49 & gpt-oss-20b & Yes & 0.03/0.14 & 89.3\% & 451/505 \\
  50 & claude-sonnet-4.5 & No & 3.00/15.00 & 89.1\% & 450/505 \\
  51 & mistral-small-24b-instruct-2501 & Yes & 0.03/0.11 & 88.7\% & 448/505 \\
  52 & qwen3-8b & Yes & 0.03/0.11 & 88.7\% & 448/505 \\
  53 & phi-4-reasoning-plus & Yes & 0.07/0.35 & 87.7\% & 443/505 \\
  54 & ministral-14b-2512 & Yes & 0.20/0.20 & 87.7\% & 443/505 \\
  55 & qwen3-vl-8b-instruct & Yes & 0.06/0.40 & 87.5\% & 442/505 \\
  56 & glm-4-32b & Yes & 0.10/0.10 & 87.3\% & 441/505 \\
  57 & ministral-8b-2512 & Yes & 0.15/0.15 & 86.9\% & 439/505 \\
  58 & gpt-4.1-nano & No & 0.10/0.40 & 86.1\% & 435/505 \\
  59 & gemma-3-27b-it & Yes & 0.04/0.15 & 85.3\% & 431/505 \\
  60 & deepseek-r1-0528-qwen3-8b & Yes & 0.02/0.10 & 85.1\% & 430/505 \\
  61 & gpt-4o-mini & No & 0.15/0.60 & 84.8\% & 428/505 \\
  62 & claude-3.5-haiku & No & 0.80/4.00 & 84.0\% & 424/505 \\
  63 & gemma-3-12b-it & Yes & 0.03/0.10 & 82.2\% & 415/505 \\
  64 & nemotron-nano-9b-v2 & Yes & 0.04/0.16 & 79.6\% & 402/505 \\
  65 & ministral-3b-2512 & Yes & 0.10/0.10 & 79.2\% & 400/505 \\
  66 & mistral-nemo & Yes & 0.02/0.04 & 78.8\% & 398/505 \\
  67 & nemotron-3-nano-30b-a3b & Yes & 0.06/0.24 & 77.4\% & 391/505 \\
  68 & nemotron-nano-12b-v2-vl & Yes & 0.20/0.60 & 77.4\% & 391/505 \\
  69 & gemma-3n-e4b-it & Yes & 0.02/0.04 & 75.2\% & 380/505 \\
  70 & llama-3.1-8b-instruct & Yes & 0.02/0.03 & 72.5\% & 366/505 \\
  71 & gemma-3-4b-it & Yes & 0.02/0.07 & 71.3\% & 360/505 \\
  72 & llama-3.2-3b-instruct & Yes & 0.02/0.02 & 57.6\% & 291/505 \\
\end{longtable}

\bibliographystyle{plainurl}
\bibliography{refs}

\end{document}
